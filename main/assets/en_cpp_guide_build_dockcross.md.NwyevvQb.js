import{_ as s,c as a,al as e,o as l}from"./chunks/framework.BVh3rIuO.js";const c=JSON.parse('{"title":"Cross-compilation with Dockcross and Android Builds","description":"","frontmatter":{"github_branch":"main"},"headers":[],"relativePath":"en/cpp/guide/build_dockcross.md","filePath":"en/cpp/guide/build_dockcross.md"}'),t={name:"en/cpp/guide/build_dockcross.md"};function n(o,i,d,h,r,p){return l(),a("div",null,i[0]||(i[0]=[e(`<h1 id="cross-compilation-with-dockcross-and-android-builds" tabindex="-1">Cross-compilation with Dockcross and Android Builds <a class="header-anchor" href="#cross-compilation-with-dockcross-and-android-builds" aria-label="Permalink to &quot;Cross-compilation with Dockcross and Android Builds&quot;">​</a></h1><p>This guide explains how to build MAVSDK using dockcross for cross-compilation and how to build for Android.</p><h2 id="building-with-dockcross" tabindex="-1">Building with Dockcross <a class="header-anchor" href="#building-with-dockcross" aria-label="Permalink to &quot;Building with Dockcross&quot;">​</a></h2><p><a href="https://github.com/dockcross/dockcross" target="_blank" rel="noreferrer">Dockcross</a> is a cross-compiling toolchain that can be used to build MAVSDK for various platforms.</p><h3 id="requirements" tabindex="-1">Requirements <a class="header-anchor" href="#requirements" aria-label="Permalink to &quot;Requirements&quot;">​</a></h3><ul><li>Docker installed and running</li><li>Git</li></ul><h3 id="getting-started-with-dockcross" tabindex="-1">Getting Started with Dockcross <a class="header-anchor" href="#getting-started-with-dockcross" aria-label="Permalink to &quot;Getting Started with Dockcross&quot;">​</a></h3><ol><li>Clone the MAVSDK repository:</li></ol><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> clone</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> https://github.com/mavlink/MAVSDK.git</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> MAVSDK</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> submodule</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> update</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --init</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --recursive</span></span></code></pre></div><ol start="2"><li>Pull and run the appropriate dockcross image for your target platform</li><li>Use the generated dockcross script to run your build commands</li></ol><h3 id="example-cross-compiling-for-arm" tabindex="-1">Example: Cross-compiling for ARM <a class="header-anchor" href="#example-cross-compiling-for-arm" aria-label="Permalink to &quot;Example: Cross-compiling for ARM&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Get the dockcross script for ARM</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --rm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> dockcross/linux-armv7</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ./dockcross-linux-armv7</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">chmod</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> +x</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ./dockcross-linux-armv7</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Use the script to run cmake and build</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">./dockcross-linux-armv7</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> bash</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -c</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;cmake -DCMAKE_BUILD_TYPE=Release -Bbuild -S. &amp;&amp; cmake --build build&#39;</span></span></code></pre></div><h2 id="building-for-android" tabindex="-1">Building for Android <a class="header-anchor" href="#building-for-android" aria-label="Permalink to &quot;Building for Android&quot;">​</a></h2><h3 id="requirements-1" tabindex="-1">Requirements <a class="header-anchor" href="#requirements-1" aria-label="Permalink to &quot;Requirements&quot;">​</a></h3><ul><li>Android NDK</li><li>CMake</li><li>Git</li><li>Java Development Kit (JDK)</li></ul><h3 id="setup-android-ndk" tabindex="-1">Setup Android NDK <a class="header-anchor" href="#setup-android-ndk" aria-label="Permalink to &quot;Setup Android NDK&quot;">​</a></h3><ol><li>Download and install <a href="https://developer.android.com/studio" target="_blank" rel="noreferrer">Android Studio</a></li><li>Install the NDK and CMake through Android Studio&#39;s SDK Manager: <ul><li>Open Android Studio</li><li>Go to Tools -&gt; SDK Manager</li><li>Select SDK Tools tab</li><li>Check &quot;NDK (Side by side)&quot; and &quot;CMake&quot;</li><li>Click Apply to download and install</li></ul></li></ol><h3 id="building" tabindex="-1">Building <a class="header-anchor" href="#building" aria-label="Permalink to &quot;Building&quot;">​</a></h3><ol><li>Clone the repository:</li></ol><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> clone</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> https://github.com/mavlink/MAVSDK.git</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> MAVSDK</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> submodule</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> update</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --init</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --recursive</span></span></code></pre></div><ol start="2"><li>Set up environment variables:</li></ol><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ANDROID_NDK_HOME</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">/path/to/android/ndk</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ANDROID_CMAKE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">/path/to/android/cmake</span></span></code></pre></div><ol start="3"><li>Configure and build for your target Android architecture:</li></ol><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">cmake</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    -DCMAKE_TOOLCHAIN_FILE=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$ANDROID_NDK_HOME</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">/build/cmake/android.toolchain.cmake</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    -DANDROID_ABI=arm64-v8a</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    -DANDROID_PLATFORM=android-28</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    -DCMAKE_BUILD_TYPE=Release</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    -Bbuild/android</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    -S.</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">cmake</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --build</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> build/android</span></span></code></pre></div><h3 id="android-build-options" tabindex="-1">Android Build Options <a class="header-anchor" href="#android-build-options" aria-label="Permalink to &quot;Android Build Options&quot;">​</a></h3><ul><li><p><code>ANDROID_ABI</code>: Specify the target architecture</p><ul><li><code>armeabi-v7a</code>: ARMv7 devices</li><li><code>arm64-v8a</code>: ARMv8 64-bit devices</li><li><code>x86</code>: x86 devices</li><li><code>x86_64</code>: x86 64-bit devices</li></ul></li><li><p><code>ANDROID_PLATFORM</code>: Minimum Android API level</p><ul><li>Example: <code>android-28</code> for Android 9.0 (Pie)</li></ul></li></ul><h3 id="additional-build-flags" tabindex="-1">Additional Build Flags <a class="header-anchor" href="#additional-build-flags" aria-label="Permalink to &quot;Additional Build Flags&quot;">​</a></h3><p>The same build flags available for regular builds can be used:</p><ul><li><code>BUILD_SHARED_LIBS</code>: Set to <code>ON</code> for shared libraries (.so)</li><li><code>SUPERBUILD</code>: Set to <code>OFF</code> to use system dependencies</li><li><code>BUILD_MAVSDK_SERVER</code>: Set to <code>ON</code> to build mavsdk_server</li><li><code>BUILD_WITHOUT_CURL</code>: Set to <code>ON</code> to build without CURL support</li></ul><h2 id="troubleshooting" tabindex="-1">Troubleshooting <a class="header-anchor" href="#troubleshooting" aria-label="Permalink to &quot;Troubleshooting&quot;">​</a></h2><h3 id="git-submodules-out-of-date" tabindex="-1">Git Submodules Out of Date <a class="header-anchor" href="#git-submodules-out-of-date" aria-label="Permalink to &quot;Git Submodules Out of Date&quot;">​</a></h3><p>If you encounter build issues, try updating the submodules:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> submodule</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> update</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --recursive</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">rm</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -rf</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> build</span></span></code></pre></div><h3 id="android-ndk-version-issues" tabindex="-1">Android NDK Version Issues <a class="header-anchor" href="#android-ndk-version-issues" aria-label="Permalink to &quot;Android NDK Version Issues&quot;">​</a></h3><p>If you encounter issues with the NDK version:</p><ol><li>Make sure you&#39;re using a compatible NDK version</li><li>Update your Android Studio and NDK to the latest stable versions</li><li>Verify that <code>ANDROID_NDK_HOME</code> points to the correct NDK version</li></ol>`,36)]))}const u=s(t,[["render",n]]);export{c as __pageData,u as default};
